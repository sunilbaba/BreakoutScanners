
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>PrimeTrade PRO</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body class="bg-slate-900 text-slate-200 p-4">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-6 bg-slate-800 p-4 rounded border border-slate-700">
                <div>
                    <h1 class="text-2xl font-bold text-white">PrimeTrade</h1>
                    <div class="text-xs text-purple-400 font-bold">AI: MACD_CROSS (BULL MARKET ðŸŸ¢)</div>
                    <div class="text-xs text-slate-500">2025-12-05 19:17 UTC</div>
                </div>
                <div class="text-right"><div class="text-xs text-slate-500">Realized PnL</div><div class="text-xl font-bold {'text-green-400' if net_pnl>=0 else 'text-red-400'}">â‚¹0</div></div>
            </div>
            
            <div class="flex gap-4 mb-6">
                <button onclick="setTab('dash')" id="btn-dash" class="font-bold text-white border-b-2 border-purple-500 pb-2">Dashboard</button>
                <button onclick="setTab('ledger')" id="btn-ledger" class="font-bold text-slate-500 pb-2">Ledger</button>
            </div>
            
            <div id="view-dash">
                <h2 class="text-xs font-bold text-slate-500 mb-3">ACTIVE PORTFOLIO</h2>
                <div id="portfolio" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"></div>
                <h2 class="text-xs font-bold text-slate-500 mb-3">NEW SIGNALS (5Y VALIDATED)</h2>
                <div id="scanner" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"></div>
            </div>
            
            <div id="view-ledger" class="hidden">
                <div class="bg-slate-800 rounded overflow-hidden"><table class="w-full text-sm text-left"><thead class="bg-slate-700"><tr><th class="p-3">Date</th><th>Symbol</th><th>Result</th><th>PnL</th></tr></thead><tbody id="live-body"></tbody></table></div>
            </div>
        </div>

        <!-- MODAL -->
        <div id="stockModal" class="fixed inset-0 bg-black/80 hidden flex items-center justify-center z-50" onclick="this.classList.add('hidden')">
            <div class="bg-slate-800 p-6 rounded-lg border border-slate-600 w-96" onclick="event.stopPropagation()">
                <h2 id="m-sym" class="text-2xl font-bold text-white mb-2">SYMBOL</h2>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="bg-slate-900 p-2 rounded text-center"><div class="text-xs text-slate-500">5Y Win Rate</div><div id="m-wr" class="text-xl font-bold text-purple-400">0%</div></div>
                    <div class="bg-slate-900 p-2 rounded text-center"><div class="text-xs text-slate-500">5Y Trades</div><div id="m-tr" class="text-xl font-bold text-white">0</div></div>
                </div>
                <div class="text-xs text-center text-slate-400">Historical performance of MACD_CROSS on this stock.</div>
            </div>
        </div>

        <script>
            const DATA = {"signals": [], "trades": [{"id": "LAURUSLABS-2025-12-05", "date": "2025-12-05", "symbol": "LAURUSLABS", "entry": 1027.4, "qty": 33, "target": 1117.27, "stop_loss": 967.49, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}, {"id": "JBCHEPHARM-2025-12-05", "date": "2025-12-05", "symbol": "JBCHEPHARM", "entry": 1833.3, "qty": 24, "target": 1954.59, "stop_loss": 1752.44, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}, {"id": "NATIONALUM-2025-12-05", "date": "2025-12-05", "symbol": "NATIONALUM", "entry": 270.8, "qty": 137, "target": 292.59, "stop_loss": 256.27, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}, {"id": "CESC-2025-12-04", "date": "2025-12-04", "symbol": "CESC", "entry": 173.66, "qty": 192, "target": 189.27, "stop_loss": 163.25, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}, {"id": "APOLLOTYRE-2025-12-04", "date": "2025-12-04", "symbol": "APOLLOTYRE", "entry": 535.3, "qty": 57, "target": 587.4, "stop_loss": 500.57, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}, {"id": "PVRINOX-2025-12-04", "date": "2025-12-04", "symbol": "PVRINOX", "entry": 1129.7, "qty": 25, "target": 1247.05, "stop_loss": 1051.47, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}, {"id": "DOMS-2025-12-04", "date": "2025-12-04", "symbol": "DOMS", "entry": 2609.0, "qty": 13, "target": 2835.71, "stop_loss": 2457.86, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}, {"id": "DCMSHRIRAM-2025-12-04", "date": "2025-12-04", "symbol": "DCMSHRIRAM", "entry": 1221.3, "qty": 16, "target": 1398.57, "stop_loss": 1103.12, "status": "OPEN", "net_pnl": 0, "deep_dive": {"wr": 0, "trades": 0}}], "backtest": {}};
            function setTab(id) {
                ['dash', 'ledger'].forEach(t => { document.getElementById('view-'+t).classList.add('hidden'); document.getElementById('btn-'+t).className="font-bold text-slate-500 pb-2"; });
                document.getElementById('view-'+id).classList.remove('hidden');
                document.getElementById('btn-'+id).className="font-bold text-white border-b-2 border-purple-500 pb-2";
            }

            function showModal(idx, type) {
                // Supports both Signal and Trade arrays
                const s = type === 'trade' ? DATA.trades[idx] : DATA.signals[idx];
                const stats = s.deep_dive || {wr: 0, trades: 0};
                document.getElementById('m-sym').innerText = s.symbol;
                document.getElementById('m-wr').innerText = stats.wr + "%";
                document.getElementById('m-tr').innerText = stats.trades;
                document.getElementById('stockModal').classList.remove('hidden');
            }

            const portRoot = document.getElementById('portfolio');
            const openT = DATA.trades.filter(t => t.status === 'OPEN');
            portRoot.innerHTML = openT.length ? openT.map((p, i) => `
                <div class="bg-slate-800 p-4 rounded border border-slate-700 cursor-pointer hover:border-blue-500 transition" onclick="showModal(${i}, 'trade')">
                    <div class="flex justify-between mb-2"><div class="font-bold text-white">${p.symbol}</div><div class="text-xs bg-blue-900 text-blue-200 px-2 py-1 rounded">OPEN</div></div>
                    <div class="flex justify-between text-[10px] font-mono mt-2"><span class="text-red-400">SL ${p.stop_loss}</span><span class="text-green-400">TGT ${p.target}</span></div>
                    <div class="text-[10px] text-center mt-2 text-slate-500">5Y Win Rate: <span class="text-white">${p.deep_dive ? p.deep_dive.wr : '...'}%</span></div>
                </div>`).join('') : '<div class="col-span-full text-center text-slate-600 py-4">No active trades</div>';

            const scanRoot = document.getElementById('scanner');
            scanRoot.innerHTML = DATA.signals.length ? DATA.signals.map((s, i) => `
                <div class="bg-slate-800 p-4 rounded border border-slate-700 cursor-pointer hover:border-purple-500 transition" onclick="showModal(${i}, 'signal')">
                    <div class="flex justify-between mb-2"><div class="font-bold text-white">${s.symbol}</div><div class="${s.change>=0?'text-green-400':'text-red-400'}">${s.change}%</div></div>
                    <div class="flex justify-between text-xs mb-2"><span class="text-slate-500">5Y Win: <span class="${s.deep_dive.wr>50?'text-green-400':'text-yellow-400'}">${s.deep_dive.wr}%</span></span><span class="text-slate-500">RR: ${s.rr}</span></div>
                    <div class="font-bold text-sm text-center py-1 rounded bg-slate-700 ${s.v_color === 'purple' ? 'text-purple-400' : 'text-green-400'}">${s.verdict}</div>
                </div>`).join('') : '<div class="col-span-full text-center text-slate-600 py-10">No strong signals</div>';

            const ledgerRoot = document.getElementById('live-body');
            ledgerRoot.innerHTML = DATA.trades.filter(t => t.status !== 'OPEN').map(t => `<tr class="border-b border-slate-700"><td class="p-3">${t.exit_date}</td><td class="p-3 font-bold">${t.symbol}</td><td class="p-3"><span class="text-[10px] px-2 py-1 rounded ${t.status==='WIN'?'bg-green-900 text-green-200':'bg-red-900 text-red-200'}">${t.status}</span></td><td class="p-3 font-mono ${t.net_pnl>=0?'text-green-400':'text-red-400'}">â‚¹${t.net_pnl}</td></tr>`).join('');
        </script>
    </body>
    </html>
    